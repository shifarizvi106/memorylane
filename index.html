<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Lane</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
:root {
    --primary: #8B5CF6;
    --secondary: #FFFFFF;
    --text: #1E293B;
    --text-light: #64748B;
    --border: #E2E8F0;
    --radius: 12px;
    --gradient: linear-gradient(135deg,#8B5CF6 0%,#EC4899 100%);
    --shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
}
.dark-mode { --primary:#A78BFA; --secondary:#0F172A; --text:#F1F5F9; --text-light:#94A3B8; --border:#334155; --shadow:0 10px 25px -5px rgba(0,0,0,0.3); }

body { font-family:'Inter',sans-serif; background:var(--secondary); color:var(--text); margin:0; padding:0; transition:all 0.3s ease; }
.container { max-width:1200px; margin:0 auto; padding:0 20px; }
header { background:var(--secondary); border-bottom:1px solid var(--border); padding:16px 0; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:1000; box-shadow:var(--shadow); }
.logo { font-size:1.5rem; font-weight:700; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.toggle { position:relative; display:inline-block; width:50px; height:24px; margin-left:10px; }
.toggle input { opacity:0; width:0; height:0; }
.slider { position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:var(--border); transition:.4s; border-radius:24px; }
.slider:before { position:absolute; content:""; height:16px; width:16px; left:4px; bottom:4px; background:white; transition:.4s; border-radius:50%; }
input:checked + .slider { background:var(--primary); }
input:checked + .slider:before { transform:translateX(26px); }

.main-content { display:grid; grid-template-columns:300px 1fr; gap:30px; padding:40px 0; min-height:calc(100vh-80px); }
.sidebar { background:var(--secondary); border:1px solid var(--border); border-radius:var(--radius); padding:24px; box-shadow:var(--shadow); }
.sidebar-section { margin-bottom:25px; }
.sidebar-section h3 { margin-bottom:15px; font-size:1.1rem; color:var(--primary); display:flex; align-items:center; gap:8px; }
.friends-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:15px; }
.friend-card { background:var(--secondary); border:1px solid var(--border); border-radius:var(--radius); padding:15px; text-align:center; cursor:pointer; transition:all 0.3s ease; position:relative; }
.friend-card:hover { transform:translateY(-3px); box-shadow:var(--shadow); border-color:var(--primary);}
.friend-avatar { width:50px; height:50px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.2rem; margin:0 auto 10px; background:var(--primary); color:white; overflow:hidden;}
.friend-name { font-weight:600; margin-bottom:5px; }
.friend-stats { font-size:0.8rem; color:var(--text-light);}
.avatar-upload { position:absolute; bottom:5px; right:5px; font-size:0.8rem; }

.page { display:none; }
.page.active { display:block; }
.timeline-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; flex-wrap:wrap; }
.btn { padding:12px 24px; border:none; border-radius:var(--radius); cursor:pointer; font-weight:600; font-size:1rem; display:inline-flex; align-items:center; gap:8px; transition:all 0.3s ease; }
.btn-primary { background:var(--gradient); color:white; }
.btn-primary:hover { transform:translateY(-2px); box-shadow:0 8px 20px rgba(139,92,246,0.4); }

#memoryMap { height:500px; border-radius:var(--radius); margin-top:20px; }
.login-container { display:flex; flex-direction:column; justify-content:center; align-items:center; height:80vh; }
.login-container input { padding:12px; margin:10px 0; border-radius:var(--radius); border:1px solid var(--border); width:200px; }
.login-container button { width:200px; }
@media(max-width:1024px){ .main-content{grid-template-columns:1fr;} .friends-grid{grid-template-columns:repeat(auto-fill,minmax(100px,1fr));} }
</style>
</head>
<body>

<header>
    <div class="logo">ðŸ•’ Memory Lane</div>
    <div class="header-actions">
        <label class="toggle">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider"></span>
        </label>
        <span>Dark Mode</span>
    </div>
</header>

<div class="container">

<div id="loginPage" class="login-container">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Name (e.g., Ritika)">
    <input type="password" id="password" placeholder="Birthday YYYY-MM-DD">
    <button class="btn btn-primary" id="loginBtn">Login</button>
    <p id="loginError" style="color:red;"></p>
</div>

<div id="appContent" style="display:none;">
<div class="main-content">

<!-- Sidebar -->
<div class="sidebar">
    <div class="sidebar-section">
        <h3>ðŸ‘¥ Your Friends</h3>
        <div class="friends-grid" id="friendsGrid"></div>
    </div>
    <div class="sidebar-section">
        <h3>ðŸŽ‚ Upcoming Birthdays</h3>
        <div id="upcomingBirthdays"><p style="color: var(--text-light); font-size:0.9rem;">No upcoming birthdays</p></div>
    </div>
</div>

<!-- Pages -->
<div class="pages-container">
    <div id="timeline" class="page active">
        <div class="timeline-header">
            <h1>Memory Timeline</h1>
            <button class="btn btn-primary">âž• Add Memory</button>
        </div>
        <p>Here you will see memories...</p>
    </div>
    <div id="map" class="page">
        <div class="timeline-header"><h1>Memory Map</h1></div>
        <div id="memoryMap"></div>
    </div>
</div>

</div>
</div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Dark mode
const toggle=document.getElementById('darkModeToggle');
toggle.addEventListener('change',()=>document.body.classList.toggle('dark-mode',toggle.checked));

// Friends Data
const friends=[
    {name:'Ritika', birthday:'2008-07-06'},
    {name:'Vidhi', birthday:'2008-11-12'},
    {name:'Saksham', birthday:'2009-01-24'},
    {name:'Harshit', birthday:'2007-01-23'},
    {name:'Sai', birthday:'2008-03-04'},
    {name:'Juili', birthday:'2008-05-25'},
    {name:'Kunal', birthday:'2008-10-19'},
    {name:'Ayaan', birthday:'2008-01-16'},
    {name:'Amrut', birthday:'2005-09-20'},
    {name:'Shifa', birthday:'2008-06-10'}
];

// Login
const loginBtn=document.getElementById('loginBtn');
loginBtn.addEventListener('click',()=>{
    const user=document.getElementById('username').value.trim();
    const pass=document.getElementById('password').value.trim();
    const found=friends.find(f=>f.name.toLowerCase()===user.toLowerCase() && f.birthday===pass);
    if(found){
        document.getElementById('loginPage').style.display='none';
        document.getElementById('appContent').style.display='block';
        loadFriends(found.name);
    } else{
        document.getElementById('loginError').textContent='Invalid name or birthday!';
    }
});

function loadFriends(loggedInUser){
    const friendsGrid=document.getElementById('friendsGrid');
    const upcomingBirthdays=document.getElementById('upcomingBirthdays');
    friendsGrid.innerHTML='';
    upcomingBirthdays.innerHTML='';

    const today=new Date();
    friends.forEach((f,i)=>{
        if(f.name===loggedInUser) return; // skip self
        const div=document.createElement('div');
        div.className='friend-card';
        div.innerHTML=`
            <div class="friend-avatar" id="avatar-${i}">${f.name[0]}</div>
            <div class="friend-name">${f.name}</div>
            <div class="friend-stats">Birthday: ${new Date(f.birthday).toLocaleDateString('en-GB',{day:'numeric',month:'short'})}</div>
            <input type="file" accept="image/*" class="avatar-upload" id="upload-${i}" title="Upload Picture">
        `;
        friendsGrid.appendChild(div);

        // Load saved avatar
        const saved=localStorage.getItem(`avatar-${i}`);
        if(saved) document.getElementById(`avatar-${i}`).style.backgroundImage=`url(${saved})`;

        document.getElementById(`upload-${i}`).addEventListener('change',(e)=>{
            const file=e.target.files[0];
            if(file){
                const reader=new FileReader();
                reader.onload=()=>{
                    document.getElementById(`avatar-${i}`).style.backgroundImage=`url(${reader.result})`;
                    document.getElementById(`avatar-${i}`).textContent='';
                    localStorage.setItem(`avatar-${i}`,reader.result);
                };
                reader.readAsDataURL(file);
            }
        });

        // Upcoming birthdays
        const b=new Date(f.birthday); b.setFullYear(today.getFullYear());
        const diff=(b-today)/(1000*60*60*24);
        if(diff>=0 && diff<=30){
            const p=document.createElement('p');
            p.style.color='var(--text)';
            p.style.fontSize='0.9rem';
            p.textContent=`${f.name} - ${b.toLocaleDateString('en-GB',{day:'numeric',month:'short'})}`;
            upcomingBirthdays.appendChild(p);
        }
    });
}
</script>
</body>
</html>
