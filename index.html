<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Lane - Discord Style</title>
<style>
  /* Discord-style dark theme */
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #2f3136;
    color: #dcddde;
    margin: 0;
    display: flex;
    height: 100vh;
  }
  /* Sidebar */
  .sidebar {
    width: 220px;
    background: #202225;
    display: flex;
    flex-direction: column;
    padding: 10px;
    overflow-y: auto;
  }
  .sidebar h2 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: #7289da;
  }
  .friend-btn {
    background: #36393f;
    border: none;
    color: #dcddde;
    padding: 8px;
    margin-bottom: 6px;
    border-radius: 5px;
    cursor: pointer;
    text-align: left;
    width: 100%;
  }
  .friend-btn:hover {
    background: #5865f2;
  }
  /* Main content */
  .main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }
  .profile-header {
    padding: 20px;
    border-bottom: 1px solid #36393f;
  }
  .profile-header h1 {
    margin: 0 0 10px 0;
    color: #ffffff;
  }
  .bio-area {
    width: 100%;
    padding: 8px;
    border-radius: 5px;
    border: none;
    background: #40444b;
    color: #dcddde;
    resize: none;
  }
  .posts-grid {
    padding: 20px;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(250px,1fr));
    gap: 15px;
  }
  .post-card {
    background: #36393f;
    border-radius: 8px;
    padding: 10px;
    display: flex;
    flex-direction: column;
  }
  .post-card img {
    width: 100%;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 8px;
  }
  .post-caption {
    margin-bottom: 5px;
  }
  .post-date {
    font-size: 0.8rem;
    color: #b9bbbe;
    margin-bottom: 8px;
  }
  .post-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .btn {
    background: #5865f2;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
  }
  .btn-danger {
    background: #f04747;
  }
  .comment-input {
    flex: 1;
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: #40444b;
    color: #dcddde;
  }
  .comments {
    margin-top: 5px;
    font-size: 0.85rem;
    color: #dcddde;
  }
  .upload-section {
    display: flex;
    gap: 8px;
    padding: 20px;
    background: #2f3136;
    border-top: 1px solid #36393f;
    align-items: center;
  }
  .upload-section input[type="file"], .upload-section input[type="text"], .upload-section input[type="date"] {
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: #40444b;
    color: #dcddde;
  }
  /* Full screen overlay */
  .overlay {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction: column;
    z-index: 999;
  }
  .overlay img {
    max-width: 90%;
    max-height: 80%;
    border-radius: 5px;
  }
  .overlay div {
    color: #dcddde;
    margin-top: 10px;
    text-align: center;
  }
  /* Login */
  #loginScreen {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: #2f3136;
    display:flex;
    flex-direction: column;
    justify-content:center;
    align-items:center;
    z-index:1000;
  }
  #loginScreen input {
    padding: 8px;
    margin: 5px;
    border-radius: 5px;
    border: none;
    background: #40444b;
    color: #dcddde;
  }
  #loginScreen button {
    margin-top: 10px;
    padding: 8px 15px;
    border: none;
    border-radius: 5px;
    background: #5865f2;
    color: white;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="loginScreen">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="password" id="password" placeholder="Birthday (dd-mm-yyyy)"><br>
  <button onclick="login()">Login</button>
  <p id="loginError" style="color:red"></p>
</div>

<div class="sidebar" id="sidebar">
  <h2>Friends</h2>
  <!-- Friend buttons will go here -->
</div>

<div class="main-content">
  <div class="profile-header">
    <h1 id="profileName"></h1>
    <textarea id="bioInput" class="bio-area" placeholder="Write your bio..."></textarea>
  </div>
  <div class="upload-section" id="uploadSection">
    <input type="file" id="imageUpload">
    <input type="text" id="captionInput" placeholder="Caption">
    <input type="date" id="memoryDate">
    <button id="uploadBtn" class="btn">Post</button>
  </div>
  <div class="posts-grid" id="postsGrid">
    <!-- Posts go here -->
  </div>
</div>

<script>
let users = [
  {name:'Shifa', birthday:'10-06-2008', bio:'', id:1},
  {name:'Ritika', birthday:'06-07-2008', bio:'', id:2},
  {name:'Vidhi', birthday:'12-11-2008', bio:'', id:3},
  {name:'Saksham', birthday:'24-01-2009', bio:'', id:4},
  {name:'Harshit', birthday:'23-01-2007', bio:'', id:5},
  {name:'Sai', birthday:'04-03-2008', bio:'', id:6},
  {name:'Juili', birthday:'25-05-2008', bio:'', id:7},
  {name:'Kunal', birthday:'19-10-2008', bio:'', id:8},
  {name:'Ayaan', birthday:'16-01-2008', bio:'', id:9},
  {name:'Amrut', birthday:'20-09-2005', bio:'', id:10}
];

let currentUser=null;
let posts=[];

// Load from localStorage
if(localStorage.getItem('posts')) posts = JSON.parse(localStorage.getItem('posts'));
if(localStorage.getItem('users')) users = JSON.parse(localStorage.getItem('users'));
if(localStorage.getItem('currentUser')) currentUser=JSON.parse(localStorage.getItem('currentUser'));

const sidebar = document.getElementById('sidebar');
const profileName = document.getElementById('profileName');
const bioInput = document.getElementById('bioInput');
const postsGrid = document.getElementById('postsGrid');
const loginScreen = document.getElementById('loginScreen');
const loginError = document.getElementById('loginError');
const imageUpload = document.getElementById('imageUpload');
const captionInput = document.getElementById('captionInput');
const memoryDate = document.getElementById('memoryDate');
const uploadBtn = document.getElementById('uploadBtn');

function login(){
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value.trim();
  const user = users.find(x=>x.name.toLowerCase()===u.toLowerCase() && x.birthday===p);
  if(user){
    currentUser=user;
    localStorage.setItem('currentUser',JSON.stringify(currentUser));
    loginScreen.style.display='none';
    renderSidebar();
    viewProfile(currentUser.name);
  } else {
    loginError.textContent='Invalid username or birthday';
  }
}

function renderSidebar(){
  sidebar.innerHTML='<h2>Friends</h2>';
  users.forEach(u=>{
    const btn=document.createElement('button');
    btn.className='friend-btn';
    btn.textContent=u.name;
    btn.onclick=()=>viewProfile(u.name);
    sidebar.appendChild(btn);
  });
}

function viewProfile(name){
  const user = users.find(u=>u.name===name);
  profileName.textContent = name+"'s Profile";
  bioInput.value = user.bio || '';
  bioInput.disabled = (name!==currentUser.name);

  // Display posts
  postsGrid.innerHTML='';
  posts.slice().reverse().filter(p=>p.user===name).forEach(p=>{
    const card=document.createElement('div');
    card.className='post-card';
    const img=document.createElement('img');
    img.src=p.image;
    img.onclick=()=>openFullView(p.image,p.caption);
    const caption=document.createElement('div');
    caption.className='post-caption';
    caption.textContent=p.caption;
    const dateDiv=document.createElement('div');
    dateDiv.className='post-date';
    dateDiv.textContent=p.date;
    const actions=document.createElement('div');
    actions.className='post-actions';
    const likeBtn=document.createElement('button');
    likeBtn.className='btn';
    likeBtn.textContent='❤️ '+(p.likes||0);
    likeBtn.onclick=()=>{
      if(!p.likes)p.likes=0;
      p.likes++;
      savePosts();
      viewProfile(name);
    };
    actions.appendChild(likeBtn);

    // Delete button
    if(p.user===currentUser.name){
      const delBtn=document.createElement('button');
      delBtn.className='btn btn-danger';
      delBtn.textContent='Delete';
      delBtn.onclick=()=>{
        posts = posts.filter(po=>po.id!==p.id);
        savePosts();
        viewProfile(name);
      };
      actions.appendChild(delBtn);
    }

    // Comments
    const commentBox=document.createElement('div');
    commentBox.style.display='flex';
    commentBox.style.gap='5px';
    const commentInput=document.createElement('input');
    commentInput.className='comment-input';
    commentInput.placeholder='Comment';
    const commentBtn=document.createElement('button');
    commentBtn.className='btn';
    commentBtn.textContent='Post';
    commentBtn.onclick=()=>{
      if(!p.comments)p.comments=[];
      if(commentInput.value.trim()==='') return;
      p.comments.push(currentUser.name+": "+commentInput.value.trim());
      commentInput.value='';
      savePosts();
      viewProfile(name);
    };
    commentBox.appendChild(commentInput);
    commentBox.appendChild(commentBtn);

    const commentsDiv=document.createElement('div');
    commentsDiv.className='comments';
    if(p.comments)p.comments.forEach(c=>{
      const cDiv=document.createElement('div');
      cDiv.textContent=c;
      commentsDiv.appendChild(cDiv);
    });

    card.appendChild(img);
    card.appendChild(caption);
    card.appendChild(dateDiv);
    card.appendChild(actions);
    card.appendChild(commentBox);
    card.appendChild(commentsDiv);

    postsGrid.appendChild(card);
  });
}

// Save bio
bioInput.addEventListener('input',()=>{
  if(currentUser){
    currentUser.bio=bioInput.value;
    users = users.map(u=>u.name===currentUser.name?currentUser:u);
    localStorage.setItem('users',JSON.stringify(users));
  }
});

// Upload post
uploadBtn.onclick=()=>{
  const file=imageUpload.files[0];
  if(!file){alert('Select image'); return;}
  const reader=new FileReader();
  reader.onload=function(e){
    const post={
      id:Date.now(),
      user: currentUser.name,
      image:e.target.result,
      caption: captionInput.value.trim(),
      date: memoryDate.value,
      likes:0,
      comments:[]
    };
    posts.push(post);
    savePosts();
    viewProfile(currentUser.name);
    imageUpload.value=''; captionInput.value=''; memoryDate.value='';
  };
  reader.readAsDataURL(file);
};

function savePosts(){
  localStorage.setItem('posts',JSON.stringify(posts));
}

function openFullView(src,caption){
  const overlay=document.createElement('div');
  overlay.className='overlay';
  const img=document.createElement('img');
  img.src=src;
  const cap=document.createElement('div');
  cap.textContent=caption;
  overlay.appendChild(img);
  overlay.appendChild(cap);
  overlay.onclick=()=>overlay.remove();
  document.body.appendChild(overlay);
}

// On load
if(currentUser){
  loginScreen.style.display='none';
  renderSidebar();
  viewProfile(currentUser.name);
}
</script>
</body>
</html>
